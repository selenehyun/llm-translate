# llm-translate 是什么？

llm-translate 是一个使用大型语言模型翻译文档的 CLI 工具。它专为技术文档设计，其中一致性、准确性和格式保持至关重要。

## 主要功能

### 术语表强制执行

定义一次特定领域的术语，并确保在所有文档中保持一致的翻译。

```json
{
  "terms": [
    {
      "source": "API endpoint",
      "targets": { "ko": "API 엔드포인트", "ja": "APIエンドポイント" }
    },
    {
      "source": "Kubernetes",
      "doNotTranslate": true
    }
  ]
}
```

### Self-Refine 质量控制

llm-translate 不是翻译一次就完成。它使用迭代细化流程：

1. **初始翻译** - 使用术语表生成首次翻译
2. **质量评估** - 根据语义准确性、流畅性、术语表合规性和格式保持进行评分
3. **反思** - 如果未达到质量阈值，识别具体问题
4. **改进** - 应用有针对性的修复
5. **重复** - 继续进行，直到质量达到阈值或达到最大迭代次数

### 提示缓存

对于 Claude 模型，llm-translate 自动使用提示缓存来降低成本：

- 系统指令和术语表在各个分块中缓存
- 后续请求使用缓存的令牌，获得 90% 的成本折扣
- 对于包含多个分块的大型文档特别有效

### 格式保持

该工具使用基于 AST 的解析来保持：

- Markdown 格式（标题、列表、表格、代码块）
- HTML 标签和属性
- 链接和图像
- 文档结构和层次

## 用例

- **技术文档** - 翻译 README、API 文档、用户指南
- **知识库** - 多语言支持文章
- **产品内容** - 发布说明、更新日志、功能描述
- **开发者资源** - 教程、指南、代码注释

## 架构

```
┌─────────────┐     ┌──────────────┐     ┌─────────────┐
│   Parser    │────▶│   Chunker    │────▶│   Agent     │
│ (MD/HTML)   │     │ (Semantic)   │     │(Self-Refine)│
└─────────────┘     └──────────────┘     └─────────────┘
                                                │
                    ┌──────────────┐            │
                    │   Provider   │◀───────────┘
                    │(Claude/GPT)  │
                    └──────────────┘
```

## 对比

| 功能 | llm-translate | 通用 LLM | 传统机器翻译 |
|---------|--------------|-------------|----------------|
| 术语表强制执行 | ✅ | ❌ | ⚠️ 有限 |
| 质量控制 | ✅ Self-Refine | ❌ | ❌ |
| 格式保持 | ✅ 基于 AST | ⚠️ 基于提示 | ❌ |
| 成本优化 | ✅ 缓存 | ❌ | N/A |
| 代码块处理 | ✅ 受保护 | ⚠️ | ❌ |
