# llm-translate とは？

llm-translate は、大規模言語モデルを使用してドキュメントを翻訳するための CLI ツールです。一貫性、正確性、およびフォーマット保持が重要な技術ドキュメント向けに特別に設計されています。

## 主な機能

### 用語集の強制

ドメイン固有の用語を一度定義し、すべてのドキュメントで一貫した翻訳を保証します。

```json
{
  "terms": [
    {
      "source": "API endpoint",
      "targets": { "ko": "API 엔드포인트", "ja": "APIエンドポイント" }
    },
    {
      "source": "Kubernetes",
      "doNotTranslate": true
    }
  ]
}
```

### Self-Refine 品質管理

llm-translate は単に一度翻訳して終わるのではなく、反復的な改善プロセスを使用します：

1. **初期翻訳** - 用語集を使用して最初の翻訳を生成
2. **品質評価** - 意味的正確性、流暢性、用語集準拠、およびフォーマット保持で評価
3. **検証** - 品質しきい値に達しない場合は特定の問題を特定
4. **改善** - 対象を絞った修正を適用
5. **繰り返し** - 品質 >= 品質しきい値に達するか、最大反復回数に達するまで継続

### プロンプトキャッシング

Claude モデルの場合、llm-translate はコストを削減するためにプロンプトキャッシングを自動的に使用します：

- システム指示と用語集は複数のチャンク全体でキャッシュされます
- 後続のリクエストはキャッシュされたトークンを 90% 割引で利用できます
- 多くのチャンクを含む大規模なドキュメントに特に効果的です

### フォーマット保持

このツールは AST ベースの解析を使用して、以下を保持します：

- Markdown フォーマット（ヘッダー、リスト、テーブル、コードブロック）
- HTML タグと属性
- リンクと画像
- ドキュメント構造と階層

## ユースケース

- **技術ドキュメント** - README、API ドキュメント、ユーザーガイドを翻訳
- **ナレッジベース** - 多言語サポート記事
- **プロダクトコンテンツ** - リリースノート、チェンジログ、機能説明
- **開発者向けリソース** - チュートリアル、ガイド、コードコメント

## アーキテクチャ

```
┌─────────────┐     ┌──────────────┐     ┌─────────────┐
│   Parser    │────▶│   Chunker    │────▶│   Agent     │
│ (MD/HTML)   │     │ (Semantic)   │     │(Self-Refine)│
└─────────────┘     └──────────────┘     └─────────────┘
                                                │
                    ┌──────────────┐            │
                    │   Provider   │◀───────────┘
                    │(Claude/GPT)  │
                    └──────────────┘
```

## 比較

| 機能 | llm-translate | 汎用的な LLM | 従来の機械翻訳 |
|---------|--------------|-------------|----------------|
| 用語集の強制 | ✅ | ❌ | ⚠️ 限定的 |
| 品質管理 | ✅ Self-Refine | ❌ | ❌ |
| フォーマット保持 | ✅ AST ベース | ⚠️ プロンプトベース | ❌ |
| コスト最適化 | ✅ キャッシング | ❌ | N/A |
| コードブロック処理 | ✅ 保護 | ⚠️ | ❌ |
