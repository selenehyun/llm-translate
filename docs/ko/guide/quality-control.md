# 품질 관리

::: info 번역
모든 비영어 문서는 Claude Sonnet 4를 사용하여 자동으로 번역됩니다.
:::

llm-translate는 Self-Refine 알고리즘을 사용하여 번역 품질이 요구사항을 충족하도록 보장합니다.

## Self-Refine 작동 방식

```
┌─────────────────┐
│ Initial Translate│
└────────┬────────┘
         ▼
┌─────────────────┐
│ Evaluate Quality │◀──────────────┐
└────────┬────────┘               │
         ▼                        │
    Score >= Threshold?           │
         │                        │
    No   │   Yes                  │
         │    │                   │
         ▼    ▼                   │
┌─────────┐ ┌──────┐              │
│ Reflect │ │ Done │              │
└────┬────┘ └──────┘              │
     ▼                            │
┌─────────────────┐               │
│    Improve      │───────────────┘
└─────────────────┘
```

### 1. 초기 번역

첫 번째 번역은 다음과 함께 생성됩니다:
- 전체 용어집 컨텍스트
- 문서 구조 정보
- 이전 청크 컨텍스트 (연속성을 위해)

### 2. 품질 평가

각 번역은 네 가지 기준으로 점수가 매겨집니다:

| 기준 | 가중치 | 설명 |
|------|--------|------|
| 의미 정확성 | 40% | 올바른 의미를 전달하는가? |
| 유창성 | 25% | 대상 언어로 자연스럽게 읽히는가? |
| 용어집 준수 | 20% | 모든 용어집 용어가 올바르게 적용되었는가? |
| 형식 보존 | 15% | Markdown/HTML 구조가 유지되었는가? |

### 3. 성찰

품질이 임계값 이하인 경우, LLM이 다음을 분석합니다:
- 어떤 구체적인 문제가 존재하는지
- 어떤 용어집 용어가 누락되었는지
- 유창성을 어디서 개선할 수 있는지

### 4. 개선

성찰 피드백을 바탕으로 대상 수정이 적용되고, 그 후 사이클이 반복됩니다.

## 구성

### 품질 임계값

```bash
# CLI
llm-translate file doc.md -o doc.ko.md -s en -t ko --quality 90

# Config file
{
  "translation": {
    "qualityThreshold": 90
  }
}
```

### 최대 반복 횟수

```bash
# CLI
llm-translate file doc.md -o doc.ko.md -s en -t ko --max-iterations 6

# Config file
{
  "translation": {
    "maxIterations": 6
  }
}
```

### 엄격 모드

품질 임계값이 충족되지 않으면 실패:

```bash
llm-translate file doc.md -o doc.ko.md -s en -t ko --strict-quality
```

종료 코드:
-`0`- 성공
-`4`- 품질 임계값 미충족 (엄격 모드)

## 품질 점수 해석

| 점수 | 품질 수준 | 설명 |
|------|----------|------|
| 95-100 | 우수 | 출판 준비 완료 |
| 85-94 | 양호 | 사소한 문제, 대부분의 용도에 허용 가능 |
| 75-84 | 보통 | 눈에 띄는 문제, 검토가 필요할 수 있음 |
| 60-74 | 미흡 | 심각한 문제, 수동 검토 필요 |
| < 60 | 허용 불가 | 주요 문제, 재번역 고려 |

## 출력 이해하기

```
✓ Translation complete
  Quality: 92/85 (threshold met)
  Breakdown:
    - Accuracy: 38/40
    - Fluency: 24/25
    - Glossary: 18/20
    - Format: 12/15
  Iterations: 2
```

### 세부 분석

- **정확성 (38/40)**: 번역이 의미적으로 정확함
- **유창성 (24/25)**: 대상 언어로 자연스럽게 읽힘
- **용어집 (18/20)**: 대부분의 용어가 적용됨, 일부 변형 있음
- **형식 (12/15)**: 사소한 형식 조정 필요

## 품질 조정

### 더 높은 품질을 위해
